<form class="{{cssClass}} actor-sheet" autocomplete="off">

  <section id="name-alias" class="flex-horizontal">

    <img src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100" width="100"/>

    <div class="grow-two">
      <div id="name">
        <label for="character-{{actor._id}}-name">{{localize "BITD.Name"}}</label>
        <input type="text" id="character-{{actor._id}}-name" name="name" value="{{actor.name}}">
      </div>

      <div id="character-traits" class="flex-column">

		  <div class="item-block flex-horizontal">
          <div class="item-class-label"><a class="item-add-popup" data-distinct="true" data-item-type="class">{{localize "BITD.Class"}}</a></div>
            {{#each actor.items as |item id|}}
                {{#if (eq item.type "class")}}
                <div class="item flex-horizontal" data-item-id="{{item._id}}">
                  <div class="item-body flex-horizontal">
                    <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                    <a class="item-name">{{item.name}}</a>
                  </div>
                  <a class="item-control item-delete" title="{{localize 'BITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
                </div>
                {{/if}}
            {{/each}}
          </div>

        <div class="item-block flex-horizontal">
          <div class="item-class-label"><a class="item-add-popup" data-distinct="true" data-item-type="heritage">{{localize "BITD.Heritage"}}</a></div>
          {{#each actor.items as |item id|}}
              {{#if (eq item.type "heritage")}}
              <div class="item flex-horizontal" data-item-id="{{item._id}}">
                <div class="item-body flex-horizontal">
                  <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                  <a class="item-name">{{item.name}}</a>
                </div>
                <a class="item-control item-delete" title="{{localize 'BITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
              </div>
              {{/if}}
          {{/each}}
        </div>

        <div class="item-block flex-horizontal">
          <div class="item-class-label"><a class="item-add-popup" data-distinct="false" data-item-type="traits">{{localize "BITD.Traits"}}</a></div>
          <div class="flex-vertical">
          {{#each actor.items as |item id|}}
            {{#if (eq item.type "trait")}}
              <div class="flex-vertical">
              <div class="item flex-horizontal" data-item-id="{{item._id}}">
                <div class="item-body flex-horizontal">
                  <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                  <a class="item-name">{{item.name}}</a>
                </div>
                <a class="item-control item-delete" title="{{localize 'BITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
              </div>
              <div class="short-description">{{item.data.shortdesc}}</div>
              </div>
            {{/if}}
          {{/each}}
          </div>
        </div>

		    <div class="item-block flex-horizontal">
          <div class="item-class-label"><a class="flag-add-popup" data-distinct="true" data-item-type="chosen">{{localize "BITD.Chosen"}}</a></div>
            {{#each actor.flags.band-of-blades.chosen as |item id|}}
                {{#unless (eq item.name "")}}
                <div class="item flex-horizontal" data-item-id="{{item._id}}" data-item-type="{{item.type}}">
                  <div class="item-body flex-horizontal">
                    <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                    <a class="item-name">{{item.name}}</a>
                  </div>
                  <a class="item-control flag-delete" title="{{localize 'BITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
                </div>
                {{/unless}}
            {{/each}}
        </div>
	    </div>
    </div>

    <div class="grow-two">
      <div id="alias">
        <label for="character-{{actor._id}}-alias">{{localize "BITD.Alias"}}</label>
        <input type="text" id="character-{{actor._id}}-alias" name="data.alias" value="{{data.alias}}">
      </div>

	    <div id="look">
        <label for="character-{{actor._id}}-look">{{localize "BITD.Look"}}</label>
        <input type="text" id="character-{{actor._id}}-look" name="data.look" value="{{data.look}}">
      </div>

      {{!-- Load --}}

    </div>

  </section>

    {{!-- Stress and Trauma --}}
    <div id="stress-trauma" class="section big-teeth-section">
        <div id="character-{{actor._id}}-stress" class="big-teeth">
            {{#multiboxes data.stress.value}}
                <input type="radio" id="character-{{actor._id}}-stress-0" name="data.stress.value" value="0" dtype="Radio">
                <div id="stress-vice">
                    <label class="black-label" for="character-{{actor._id}}-stress-0">{{localize data.stress.name}}</label>
                </div>
                {{#times_from_1 data.stress.max}}
                    <input type="radio" id="character-{{../actor._id}}-stress-{{this}}" name="data.stress.value" value="{{this}}" dtype="Radio">
                    <label for="character-{{../actor._id}}-stress-{{this}}"></label>
                {{/times_from_1}}
            {{/multiboxes}}
        </div>
        <div id="character-{{actor._id}}-trauma-container" class="small-teeth-container">
            {{#traumacounter data.trauma.list}}
                <div id="character-{{actor._id}}-trauma" class="small-teeth-wrap">
                    <label class="black-label" for="character-{{actor._id}}-trauma-counter-0">{{localize data.trauma.name}}</label>
                    <div id="trauma-teeth" class="small-teeth">
                        <input type="radio" id="character-{{actor._id}}-trauma-counter-0" name="data.trauma.value" value="0">
                        {{#times_from_1 data.trauma.max}}
                            <input type="radio" id="character-{{../actor._id}}-trauma-counter-{{this}}" name="data.trauma.value" value="{{this}}" disabled>
                            <label for="character-{{../actor._id}}-trauma-counter-{{this}}"></label>
                        {{/times_from_1}}
                    </div>
                </div>
            {{/traumacounter}}
        </div>

        <div id="trauma-list">
            <label>
                <input type="checkbox" name="data.trauma.list.cold" value="cold" {{checked data.trauma.list.cold}}>
                <span class="checkmark">{{localize "BITD.TraumaCold"}}</span>
            </label>
            <label>
                <input type="checkbox" name="data.trauma.list.haunted" value="haunted" {{checked data.trauma.list.haunted}}>
                <span class="checkmark">{{localize "BITD.TraumaHaunted"}}</span>
            </label>
            <label>
                <input type="checkbox" name="data.trauma.list.obsessed" value="obsessed" {{checked data.trauma.list.obsessed}}>
                <span class="checkmark">{{localize "BITD.TraumaObsessed"}}</span>
            </label>
            <label>
                <input type="checkbox" name="data.trauma.list.paranoid" value="paranoid" {{checked data.trauma.list.paranoid}}>
                <span class="checkmark">{{localize "BITD.TraumaParanoid"}}</span>
            </label>
            <label>
                <input type="checkbox" name="data.trauma.list.reckless" value="reckless" {{checked data.trauma.list.reckless}}>
                <span class="checkmark">{{localize "BITD.TraumaReckless"}}</span>
            </label>
            <label>
                <input type="checkbox" name="data.trauma.list.soft" value="soft" {{checked data.trauma.list.soft}}>
                <span class="checkmark">{{localize "BITD.TraumaSoft"}}</span>
            </label>
            <label>
                <input type="checkbox" name="data.trauma.list.unstable" value="unstable" {{checked data.trauma.list.unstable}}>
                <span class="checkmark">{{localize "BITD.TraumaUnstable"}}</span>
            </label>
            <label>
                <input type="checkbox" name="data.trauma.list.vicious" value="vicious" {{checked data.trauma.list.vicious}}>
                <span class="checkmark">{{localize "BITD.TraumaVicious"}}</span>
            </label>
        </div>
    </div>

    {{!-- Corruption and Blight --}}
    <div id="corruption-blight" class="section big-teeth-section">
        <div id="character-{{actor._id}}-corruption" class="big-teeth">
            {{#multiboxes data.corruption.value}}
                <input type="radio" id="character-{{actor._id}}-corruption-0" name="data.corruption.value" value="0" dtype="Radio">
                <div id="corruption">
                    <label class="black-label" for="character-{{actor._id}}-corruption-0">{{localize data.corruption.name}}</label>
                </div>
                {{#times_from_1 data.corruption.max}}
                    <input type="radio" id="character-{{../actor._id}}-corruption-{{this}}" name="data.corruption.value" value="{{this}}" dtype="Radio">
                    <label for="character-{{../actor._id}}-corruption-{{this}}"></label>
                {{/times_from_1}}
            {{/multiboxes}}

        </div>
        <div id="character-{{actor._id}}-blight-container" class="small-teeth-container">
            {{#traumacounter data.blight.list}}
                <div id="character-{{actor._id}}-blight" class="small-teeth-wrap">
                    <label class="black-label" for="character-{{actor._id}}-blight-counter-0">{{localize data.blight.name}}</label>
                    <div id="blight-teeth" class="small-teeth">
                        <input type="radio" id="character-{{actor._id}}-blight-counter-0" name="data.blight.value" value="0">
                        {{#times_from_1 data.blight.max}}
                            <input type="radio" id="character-{{../actor._id}}-blight-counter-{{this}}" name="data.blight.value" value="{{this}}" disabled>
                            <label for="character-{{../actor._id}}-blight-counter-{{this}}"></label>
                        {{/times_from_1}}
                    </div>
                </div>
            {{/traumacounter}}
        </div>

        <div id="blight-list">
            <label>
                <input type="checkbox" name="data.blight.list.anathema" value="anathema" {{checked data.blight.list.anathema}}>
                <span class="checkmark">{{localize "BITD.BlightAnathema"}}</span>
            </label>
            <label>
                <input type="checkbox" name="data.blight.list.host" value="host" {{checked data.blight.list.host}}>
                <span class="checkmark">{{localize "BITD.BlightHost"}}</span>
            </label>
            <label>
                <input type="checkbox" name="data.blight.list.hunger" value="hunger" {{checked data.blight.list.hunger}}>
                <span class="checkmark">{{localize "BITD.BlightHunger"}}</span>
            </label>
            <label>
                <input type="checkbox" name="data.blight.list.miasma" value="miasma" {{checked data.blight.list.miasma}}>
                <span class="checkmark">{{localize "BITD.BlightMiasma"}}</span>
            </label>
            <label>
                <input type="checkbox" name="data.blight.list.mutated" value="mutated" {{checked data.blight.list.mutated}}>
                <span class="checkmark">{{localize "BITD.BlightMutated"}}</span>
            </label>
            <label>
                <input type="checkbox" name="data.blight.list.rage" value="rage" {{checked data.blight.list.rage}}>
                <span class="checkmark">{{localize "BITD.BlightRage"}}</span>
            </label>
            <label>
                <input type="checkbox" name="data.blight.list.rot" value="rot" {{checked data.blight.list.rot}}>
                <span class="checkmark">{{localize "BITD.BlightRot"}}</span>
            </label>
            <label>
                <input type="checkbox" name="data.blight.list.visions" value="visions" {{checked data.blight.list.visions}}>
                <span class="checkmark">{{localize "BITD.BlightVisions"}}</span>
            </label>
        </div>
    </div>

  {{!-- Harm, Healing and Armor --}}
  <section id="harm-armor">
    <div id="character-harm">
      <table>
        <thead>
          <th class="black-white" colspan="4">{{localize "BITD.Harm"}}</th>
          <th class="black-white">{{localize "BITD.Healing"}}</th>
          <th class="black-white">{{localize "BITD.Armor"}}</th>
          <th class="black-white">{{localize "BITD.SpecialistUses"}}</th>
        </thead>
        <tbody>
          <tr>
            <td>3</td>
            <td colspan="2">
              <input type="text" id="character-{{actor._id}}-harm-3-1" name="data.harm.heavy.one" value="{{data.harm.heavy.one}}">
            </td>
            <td>{{localize "BITD.NeedHelp"}}</td>
            <td id="character-healing-heavy" class="healing-checkboxes">
              <div>
                <input id="healing-uses-heavy-one-{{actor._id}}" type="checkbox" name="data.harm.heavy.heal_one" {{checked data.harm.heavy.heal_one}}>
                <label for="healing-uses-heavy-one-{{actor._id}}"></label>
              </div>
              <div>
                <input id="healing-uses-heavy-two-{{actor._id}}" type="checkbox" name="data.harm.heavy.heal_two" {{checked data.harm.heavy.heal_two}}>
                <label for="healing-uses-heavy-two-{{actor._id}}"></label>
              </div>
              <div>
                <input id="healing-uses-heavy-three-{{actor._id}}" type="checkbox" name="data.harm.heavy.heal_three" {{checked data.harm.heavy.heal_three}}>
                <label for="healing-uses-heavy-three-{{actor._id}}"></label>
              </div>
            </td>
            <td rowspan="3" id="character-armor-uses">
              <div>
                <div class="armor-checkboxes">
                  <div>{{localize "BITD.Armor"}}</div>
                  <input id="armor-uses-armor-{{actor._id}}" type="checkbox" name="data.armor-uses.armor" {{checked data.armor-uses.armor}}>
                  <label for="armor-uses-armor-{{actor._id}}"></label>
                </div>
                <div class="armor-checkboxes">
                  <div>{{localize "BITD.Heavy"}}</div>
                  <input id="armor-uses-heavy-{{actor._id}}" type="checkbox" name="data.armor-uses.heavy" {{checked data.armor-uses.heavy}}>
                  <label for="armor-uses-heavy-{{actor._id}}"></label>
                </div>
                <div class="armor-checkboxes">
                  <div>{{localize "BITD.Shield"}}</div>
                  <input id="armor-uses-shield-{{actor._id}}" type="checkbox" name="data.armor-uses.shield" {{checked data.armor-uses.shield}}>
                  <label for="armor-uses-shield-{{actor._id}}"></label>
                </div>
                <div class="armor-checkboxes">
                  <div>{{localize "BITD.Special"}}</div>
                  <input id="armor-uses-special-{{actor._id}}" type="checkbox" name="data.armor-uses.special" {{checked data.armor-uses.special}}>
                  <label for="armor-uses-special-{{actor._id}}"></label>
                </div>
              </div>
            </td>
            <td id="specialist-actions" class="specialist-checkboxes">
              {{#each data.attributes as |attribute attribute_name|}}
                <div id="attributes-{{attribute_name}}" class="attribute">
                {{#if (eq attribute "specialist")}}
                  {{#each attribute.skills as |skill skill_name|}}
                    <div class="flex-horizontal">
                      {{#if (gt skill.max 0)}}
                        <div class="attributes-container">
                          {{#multiboxes skill.uses}}

                            {{#times_from_0 skill.value}}
                              <input type="radio" id="attributes-{{../../../actor._id}}-{{skill_name}}-{{this}}"
                                     name="data.attributes.{{attribute_name}}.skills.{{skill_name}}.value" value="{{this}}">
                              <label for="attributes-{{../../../actor._id}}-{{skill_name}}-{{this}}"></label>
                            {{/times_from_0}}

                            <div class="attribute-skill-label">{{localize skill.label}}</div>
                          {{/multiboxes}}
                        </div>
                      {{/if}}
                    </div>
                  {{/each}}
                {{/if}}
                </div>
              {{/each}}
            </td>
          </tr>
          <tr>
            <td>2</td>
            <td>
              <input type="text" id="character-{{actor._id}}-harm-2-1" name="data.harm.medium.one" value="{{data.harm.medium.one}}">
            </td>
            <td>
              <input type="text" id="character-{{actor._id}}-harm-2-2" name="data.harm.medium.two" value="{{data.harm.medium.two}}">
            </td>
            <td>-1d</td>
            <td id="character-healing-medium" class="healing-checkboxes">
              <div>
                <input id="healing-uses-medium-one-{{actor._id}}" type="checkbox" name="data.harm.medium.heal_one" {{checked data.harm.medium.heal_one}}>
                <label for="healing-uses-medium-one-{{actor._id}}"></label>
              </div>
              <div>
                <input id="healing-uses-medium-two-{{actor._id}}" type="checkbox" name="data.harm.medium.heal_two" {{checked data.harm.medium.heal_two}}>
                <label for="healing-uses-medium-two-{{actor._id}}"></label>
              </div>
            </td>
          </tr>
          <tr>
            <td>1</td>
            <td>
              <input type="text" id="character-{{actor._id}}-harm-1-1" name="data.harm.light.one" value="{{data.harm.light.one}}">
            </td>
            <td>
              <input type="text" id="character-{{actor._id}}-harm-1-2" name="data.harm.light.two" value="{{data.harm.light.two}}">
            </td>
            <td>{{localize "BITD.LessEffect"}}</td>
            <td id="character-healing-light" class="healing-checkboxes">
              <div>
                <input id="healing-uses-light-one-{{actor._id}}" type="checkbox" name="data.harm.light.heal_one" {{checked data.harm.light.heal_one}}>
                <label for="healing-uses-light-one-{{actor._id}}"></label>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>




  {{!-- Attributes --}}
  <section class="flex-horizontal">

    <div class="tab-content flex-vertical grow-two">

      {{!-- Nav menu --}}
      <nav class="tabs flex-horizontal">
        <a class="item" data-tab="abilities">{{localize "BITD.Abilities"}}</a>
        <a class="item" data-tab="loadout">{{localize "BITD.Loadout"}}</a>
        <a class="item" data-tab="character-notes">{{localize "BITD.Notes"}}</a>
        <a class="item" data-tab="all-character-items">{{localize "BITD.AllItems"}}</a>
      </nav>

      <div id="abilities" class="tab flex-vertical" data-tab="abilities">
        <div class="label-stripe">
          <p><label for="character-{{actor._id}}-experience-0">{{localize "BITD.Abilities"}}</label></p>
          <p><a class="item-add-popup" data-item-type="ability" data-limiter=data.character_class><i class="fas fa-plus-square"></i></a></p>
          <div id="character-experience" class="teeth-experience">
            <p><span class="xp-triggers nullifier">{{localize "BITD.PExperience"}}</span></p>
			      <label for="character-{{actor._id}}-experience-0"><i class="fab fa-creative-commons-zero nullifier"></i></label>
            {{#multiboxes data.experience}}
            <input type="radio" id="character-{{actor._id}}-experience-0" name="data.experience" value="0" dtype="Radio">
            <input type="radio" id="character-{{actor._id}}-experience-1" name="data.experience" value="1" dtype="Radio">
            <label for="character-{{actor._id}}-experience-1"></label>
            <input type="radio" id="character-{{actor._id}}-experience-2" name="data.experience" value="2" dtype="Radio">
            <label for="character-{{actor._id}}-experience-2"></label>
            <input type="radio" id="character-{{actor._id}}-experience-3" name="data.experience" value="3" dtype="Radio">
            <label for="character-{{actor._id}}-experience-3"></label>
            <input type="radio" id="character-{{actor._id}}-experience-4" name="data.experience" value="4" dtype="Radio">
            <label for="character-{{actor._id}}-experience-4"></label>
            <input type="radio" id="character-{{actor._id}}-experience-5" name="data.experience" value="5" dtype="Radio">
            <label for="character-{{actor._id}}-experience-5"></label>
            <input type="radio" id="character-{{actor._id}}-experience-6" name="data.experience" value="6" dtype="Radio">
            <label for="character-{{actor._id}}-experience-6"></label>
            <input type="radio" id="character-{{actor._id}}-experience-7" name="data.experience" value="7" dtype="Radio">
            <label for="character-{{actor._id}}-experience-7"></label>
            <input type="radio" id="character-{{actor._id}}-experience-8" name="data.experience" value="8" dtype="Radio">
            <label for="character-{{actor._id}}-experience-8"></label>
            {{/multiboxes}}
          </div>
        </div>

        <div id="abilities-list">
          {{#each actor.items as |item id|}}
          {{#if (eq item.type "ability")}}
            <div class="item flex-horizontal" data-item-id="{{item._id}}">
              <div class="item-body flex-horizontal">
                <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
				        <a class="item-name">{{item.name}}</a>
                <div class="item-description">{{item.data.description}}</div>
              </div>
              <a class="item-control item-delete" title="{{localize 'BITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
            </div>
          {{/if}}
          {{/each}}
          <div class="item-class-label"><a class="item-add-popup" data-item-type="ability">{{localize "BITD.AddAbility"}}</a></div>
        </div>
      </div>

      {{!-- Owned Items Tab --}}
      <div id="loadout" class="tab flex-vertical" data-tab="loadout">

		    <div class="label-stripe{{#if (eq data.loadout.load_level "BITD.OverMax")}}-red{{/if}}">
          <p><label>{{localize "BITD.Loadout"}}</label>:  {{data.loadout.current}} / {{localize data.loadout.load_level}}</p>
          <p><a class="item-add-popup" data-item-type="item"><i class="fas fa-plus-square"></i></a></p>
        </div>
        <div id="loadout-list">
          {{#each actor.items as |item id|}}
          {{#if (eq item.type "item")}}
            <div class="item flex-horizontal" data-item-id="{{item._id}}">
              <div class="item-body flex-horizontal">
                <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                <a class="item-name">{{item.name}}</a>
                <div class="item-description">{{item.data.description}}</div>
              </div>
              <a class="item-control item-delete" title="{{localize 'BITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
            </div>
          {{/if}}
          {{/each}}
          <div class="item-class-label"><a class="item-add-popup" data-item-type="item">{{localize "BITD.AddItem"}}</a></div>
        </div>
      </div>

      <div class="tab flex-vertical" data-tab="character-notes">
        <div class="label-stripe">
          <p><label>{{localize "BITD.Notes"}}</label></p>
        </div>
        {{editor content=data.notes target="data.notes" button=true owner=owner editable=editable}}
        {{#if editable}}
          <button type="submit" name="submit"><i class="fas fa-feather-alt"></i> {{localize "JOURNAL.Submit"}}</button>
        {{/if}}
      </div>

      {{!-- Full Item List --}}
      <div id="all-items" class="tab grow-two flex-vertical" data-tab="all-character-items">
        <div class="label-stripe">
          <p><label>{{localize "BITD.AllItems"}}</label></p>
        </div>
        {{#each actor.items as |item id|}}
        <div class="item flex-horizontal" data-item-id="{{item._id}}">
          <div class="item-body item-sheet-open flex-horizontal">
            <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
            <a class="item-name">{{item.name}}</a>
          </div>
          <a class="item-control item-delete" title="{{localize 'BITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
        </div>
        {{/each}}
      </div>

    </div>
    {{!-- Attributes --}}
    {{> "systems/band-of-blades/templates/parts/attributes.html" actor=actor}}
  </section>

</form>
